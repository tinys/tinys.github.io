/**combine by hugjs**/
define("core/model",function(){return function(t){var e=t||{},n={};return e.on=function(t,e){var r=n[t];r||(r=n[t]=[]),r.push(e)},e.trigger=function(t){var r=n[t],i=Array.prototype.slice.call(arguments,1);r&&r.forEach(function(t){try{t.apply(e,i)}catch(n){}})},e.off=function(t,e){var r=n[t];if(r)for(var i=0;i<r.length;i++)if(r[i]==e)return r.splice(i,1)},e.destroy=function(){n=null},e}}),define("page/layout/gamelayout",function(t){function e(t,e,n,r){for(var i=[],o=0;t>o;o++)for(var a=0;e>a;a++)i.push({sort:o*e+a+1,x:-a*n,y:-o*r});return i}function n(t){function e(t,e){var n=t.length,r=e,i=0;if(1==n)return t[0];for(;!r||r==e;)i=Number((Math.random()*n%n).toFixed(0)),r=t[i];return t.splice(i,1),r}for(var n=t.concat(),r=[],i=t.length,o=0;i>o;o++)r.push(e(n,t[o]));return r}var r=t("core/model");return function(t,i){function o(t,e,n,r){v&&v.parentNode.removeChild(v),v=document.createElement("style"),v.appendChild(document.createTextNode("")),document.head.appendChild(v),v.innerHTML=".drag-item-bg"+t+"{background:url("+e+");background-size:"+n+"px "+r+"px;}"}function a(t,e){var n=[],r=Date.now()+g++;return e?r=y:y=r,t.forEach(function(t){n.push('<div class="item drag-item-bg'+y+'" sort="'+t.sort+'" style="background-position:'+t.x+"px "+t.y+'px;" dragitem=1></div>')}),e||o(r,d,p,m),n.join("")}function s(){w=e(l,u,f,h)}var c=r();i=i||{};var u=i.column||3,l=i.row||3,f=i.width||100,h=i.height||100,d=i.imgSrc,p=f*u,m=l*h;if(!d)throw"no image src ";var v=!1,g=0,y="",w=!1;return c.toWright=function(){t.innerHTML=a(w,!1),c.getList()},c.random=function(){var e=n(w);e=e.sort(function(){return 10*Math.random()-5});var r=a(e,!0);t.innerHTML=r,c.trigger("randomLayout")},c.check=function(){for(var e=t.querySelectorAll("[sort]"),n=!1,r=e.length;r--;){var i=e[r],o=parseInt(i.getAttribute("sort"));if(n!==!1&&1!=n-parseInt(i.getAttribute("sort")))return!1;n=o}return!0},c.getList=function(){return t.querySelectorAll("[sort]")},c.reset=function(t){u=t.column||u,l=t.row||l,f=t.width||f,h=t.height||h,d=t.img||d,p=f*u,m=l*h,s()},s(),c}});